{"ast":null,"code":"import _defineProperty from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _createForOfIteratorHelper from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _objectSpread from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kylelong/corkedup/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from'axios';import EventsHeader from'./EventsHeader';import Navigation from'../Navigation';import SideMenu from'../SideMenu';import{makeStyles}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& > *':{margin:theme.spacing(1),width:'25ch'}}};});var Events=function Events(){var _jsx2;// test with zipCode -> cleanUrls with urls array -> promise array with promises containing clean urls\n// || JSON.parse(window.localStorage.getItem('bars')) !== cleanUrls)\nvar _useState=useState(\"24060\"),_useState2=_slicedToArray(_useState,2),zipCode=_useState2[0],setZipCode=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),urlData=_useState4[0],setUrlData=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),cleanUrls=_useState6[0],setCleanUrls=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),zipCodeSave=_useState8[0],setZipCodeSave=_useState8[1];var _useState9=useState({zipcode:\"\"}),_useState10=_slicedToArray(_useState9,2),errors=_useState10[0],setErrors=_useState10[1];var classes=useStyles();// get urls\nuseEffect(function(){console.log(\"getting url data...\",zipCode);axios.get(\"/test\",{params:{zipCode:zipCode}}).then(function(response){console.log(response.data);setUrlData(response.data);}).catch(function(error){console.log(error);});},[zipCode]);// clean them \nvar cleanUrl=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/cleanUrl\",{params:{url:url}});case 2:response=_context.sent;_context.next=5;return response.data;case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}}},_callee);}));return function cleanUrl(_x){return _ref.apply(this,arguments);};}();var onChange=function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setZipCodeSave(false);if(name===\"zipcode\"){if(value.length===5){var regEx=/^[0-9]{5}$/;if(value.match(regEx)){console.log(value);setZipCode(value);setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{zipCode:\"\"});});}else{setErrors(function(prevErrors){return _objectSpread(_objectSpread({},prevErrors),{},{zipCode:\"Zipcode must be 5 digits\"});});}}}};// store all clean urls using cleanUrl\nuseEffect(function(){var urls=[];console.log(\"cleaning urls\");var _iterator=_createForOfIteratorHelper(urlData),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var url=_step.value;var data=cleanUrl(url);if(data!=null){urls.push(data);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}Promise.all(urls).then(function(response){setCleanUrls(response);console.log(response,cleanUrls);var bars=JSON.parse(window.localStorage.getItem('bars'));//console.log(JSON.parse(window.localStorage.getItem('bars')), response);\n// if( bars === null || bars === undefined || bars.length == 0) {\n//    // console.log(response);\n//     window.localStorage.setItem('bars', JSON.stringify(response));\n//     //console.log(window.localStorage.getItem('bars') );\n// }\n// if(response.length > 0 && response !== bars) {\n//     console.log(response);\n//     window.localStorage.removeItem('bars');\n//     window.localStorage.setItem('bars', JSON.stringify(response));\n// }\n}).catch(function(err){console.log(err);});},[urlData]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(EventsHeader,{}),/*#__PURE__*/_jsx(SideMenu,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"wineBarsContainer\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\",id:\"zipCodeForm\",onSubmit:function onSubmit(e){e.preventDefault();},children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"zipcode\",children:\"Zipcode\"}),/*#__PURE__*/_jsx(TextField,(_jsx2={id:\"outlined-basic\",label:zipCode,variant:\"outlined\",name:\"zipcode\"},_defineProperty(_jsx2,\"id\",\"zipcode\"),_defineProperty(_jsx2,\"placeholder\",zipCode),_defineProperty(_jsx2,\"inputProps\",{maxLength:5}),_defineProperty(_jsx2,\"onChange\",onChange),_jsx2)),errors.zipcode.length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.zipCode}),zipCodeSave&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"green\"},children:\"Zip Code successfully saved.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{children:cleanUrls.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):cleanUrls.map(function(url,i){return/*#__PURE__*/_jsx(\"p\",{children:url},i);})})]});};export default Events;","map":{"version":3,"sources":["/Users/kylelong/corkedup/src/components/events/Events.js"],"names":["React","useEffect","useState","axios","EventsHeader","Navigation","SideMenu","makeStyles","TextField","useStyles","theme","root","margin","spacing","width","Events","zipCode","setZipCode","urlData","setUrlData","cleanUrls","setCleanUrls","zipCodeSave","setZipCodeSave","zipcode","errors","setErrors","classes","console","log","get","params","then","response","data","catch","error","cleanUrl","url","onChange","e","target","name","value","length","regEx","match","prevErrors","urls","push","Promise","all","bars","JSON","parse","window","localStorage","getItem","err","preventDefault","maxLength","color","map","i"],"mappings":"g3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,QAAP,KAAqB,aAArB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,6BAAtB,C,wFACA,GAAMC,CAAAA,SAAS,CAAGF,UAAU,CAAC,SAACG,KAAD,QAAY,CACrCC,IAAI,CAAE,CACJ,QAAS,CACPC,MAAM,CAAEF,KAAK,CAACG,OAAN,CAAc,CAAd,CADD,CAEPC,KAAK,CAAE,MAFA,CADL,CAD+B,CAAZ,EAAD,CAA5B,CAQA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,WACjB;AACA;AAFiB,cAGab,QAAQ,CAAC,OAAD,CAHrB,wCAGVc,OAHU,eAGDC,UAHC,8BAIaf,QAAQ,CAAC,EAAD,CAJrB,yCAIVgB,OAJU,eAIDC,UAJC,8BAKiBjB,QAAQ,CAAC,EAAD,CALzB,yCAKVkB,SALU,eAKCC,YALD,8BAMqBnB,QAAQ,CAAC,KAAD,CAN7B,yCAMVoB,WANU,eAMGC,cANH,8BAOWrB,QAAQ,CAAC,CAACsB,OAAO,CAAE,EAAV,CAAD,CAPnB,0CAOVC,MAPU,gBAOFC,SAPE,gBAQjB,GAAMC,CAAAA,OAAO,CAAGlB,SAAS,EAAzB,CACJ;AACIR,SAAS,CAAC,UAAM,CACZ2B,OAAO,CAACC,GAAR,CAAY,qBAAZ,CAAmCb,OAAnC,EACAb,KAAK,CAAC2B,GAAN,CAAU,OAAV,CAAmB,CAACC,MAAM,CAAE,CAAEf,OAAO,CAAEA,OAAX,CAAT,CAAnB,EACCgB,IADD,CACM,SAACC,QAAD,CAAc,CAChBL,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,IAArB,EACAf,UAAU,CAACc,QAAQ,CAACC,IAAV,CAAV,CACH,CAJD,EAKCC,KALD,CAKO,SAACC,KAAD,CAAW,CACdR,OAAO,CAACC,GAAR,CAAYO,KAAZ,EACH,CAPD,EAUH,CAZQ,CAYN,CAACpB,OAAD,CAZM,CAAT,CAaA;AACA,GAAMqB,CAAAA,QAAQ,0FAAG,iBAAOC,GAAP,0JACWnC,CAAAA,KAAK,CAAC2B,GAAN,CAAU,WAAV,CAAuB,CAACC,MAAM,CAAE,CAAEO,GAAG,CAAEA,GAAP,CAAT,CAAvB,CADX,QACPL,QADO,qCAEMA,CAAAA,QAAQ,CAACC,IAFf,QAEPA,IAFO,+CAGNA,IAHM,wDAAH,kBAARG,CAAAA,QAAQ,4CAAd,CAMA,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,CAAD,CAAO,eACIA,CAAC,CAACC,MADN,CACZC,IADY,WACZA,IADY,CACNC,KADM,WACNA,KADM,CAEpBpB,cAAc,CAAC,KAAD,CAAd,CACA,GAAGmB,IAAI,GAAK,SAAZ,CAAsB,CAClB,GAAGC,KAAK,CAACC,MAAN,GAAkB,CAArB,CAAuB,CACnB,GAAMC,CAAAA,KAAK,CAAG,YAAd,CACA,GAAGF,KAAK,CAACG,KAAN,CAAYD,KAAZ,CAAH,CAAsB,CAClBjB,OAAO,CAACC,GAAR,CAAYc,KAAZ,EACA1B,UAAU,CAAC0B,KAAD,CAAV,CACAjB,SAAS,CAAC,SAAAqB,UAAU,wCAAUA,UAAV,MAAsB/B,OAAO,CAAE,EAA/B,IAAX,CAAT,CACH,CAJD,IAKI,CACAU,SAAS,CAAC,SAAAqB,UAAU,wCAAUA,UAAV,MAAsB/B,OAAO,CAAE,0BAA/B,IAAX,CAAT,CACH,CACJ,CACJ,CACJ,CAhBD,CAiBA;AACAf,SAAS,CAAC,UAAM,CACZ,GAAI+C,CAAAA,IAAI,CAAG,EAAX,CACApB,OAAO,CAACC,GAAR,CAAY,eAAZ,EAFY,yCAGKX,OAHL,YAGZ,+CAAyB,IAAfoB,CAAAA,GAAe,aACrB,GAAIJ,CAAAA,IAAI,CAAGG,QAAQ,CAACC,GAAD,CAAnB,CACA,GAAGJ,IAAI,EAAI,IAAX,CAAgB,CACZc,IAAI,CAACC,IAAL,CAAUf,IAAV,EACH,CACJ,CARW,qDASZgB,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkBhB,IAAlB,CAAuB,SAACC,QAAD,CAAc,CACjCZ,YAAY,CAACY,QAAD,CAAZ,CACAL,OAAO,CAACC,GAAR,CAAYI,QAAZ,CAAsBb,SAAtB,EACA,GAAIgC,CAAAA,IAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,MAA5B,CAAX,CAAX,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGH,CAjBD,EAiBGtB,KAjBH,CAiBS,SAAAuB,GAAG,CAAI,CACZ9B,OAAO,CAACC,GAAR,CAAY6B,GAAZ,EACH,CAnBD,EAsBH,CA/BQ,CA+BN,CAACxC,OAAD,CA/BM,CAAT,CAkCA,mBACI,oCACI,KAAC,UAAD,IADJ,cAEI,KAAC,YAAD,IAFJ,cAGI,KAAC,QAAD,IAHJ,cAII,aAAK,SAAS,CAAC,mBAAf,wBACY,aADZ,cAEY,cAAM,SAAS,CAAES,OAAO,CAAChB,IAAzB,CAA+B,UAAU,KAAzC,CAA0C,YAAY,CAAC,KAAvD,CAA6D,EAAE,CAAC,aAAhE,CAA8E,QAAQ,CAAE,kBAAA6B,CAAC,CAAI,CAACA,CAAC,CAACmB,cAAF,GAAoB,CAAlH,wBACI,cAAO,OAAO,CAAC,SAAf,qBADJ,cAEQ,KAAC,SAAD,SAAW,EAAE,CAAC,gBAAd,CAA+B,KAAK,CAAE3C,OAAtC,CAA+C,OAAO,CAAC,UAAvD,CAAkE,IAAI,CAAC,SAAvE,6BAAoF,SAApF,sCAA2GA,OAA3G,qCAAiI,CAAE4C,SAAS,CAAC,CAAZ,CAAjI,mCAA4JrB,QAA5J,SAFR,CAGUd,MAAM,CAACD,OAAP,CAAeoB,MAAf,CAAwB,CAAzB,eACD,UAAG,SAAS,CAAC,OAAb,UAAsBnB,MAAM,CAACT,OAA7B,EAJR,CASSM,WAAW,eACR,aAAM,KAAK,CAAE,CAACuC,KAAK,CAAE,OAAR,CAAb,0CAVZ,GAFZ,GAJJ,cAqBI,qBAGIzC,SAAS,CAACwB,MAAV,GAAqB,CAArB,cACA,iCADA,CAGAxB,SAAS,CAAC0C,GAAV,CAAc,SAACxB,GAAD,CAAMyB,CAAN,CAAY,CACtB,mBACI,mBAAYzB,GAAZ,EAAQyB,CAAR,CADJ,CAGH,CAJD,CANJ,EArBJ,GADJ,CAsCH,CAxHD,CA0HA,cAAehD,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport EventsHeader from './EventsHeader';\nimport Navigation from '../Navigation';\nimport SideMenu from '../SideMenu';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1),\n        width: '25ch',\n      },\n    },\n  }));\nconst Events = () => {\n    // test with zipCode -> cleanUrls with urls array -> promise array with promises containing clean urls\n    // || JSON.parse(window.localStorage.getItem('bars')) !== cleanUrls)\n    const [zipCode, setZipCode] = useState(\"24060\")\n    const [urlData, setUrlData] = useState([]);\n    const [cleanUrls, setCleanUrls] = useState([]);\n    const [zipCodeSave, setZipCodeSave] = useState(false);\n    const [errors, setErrors] = useState({zipcode: \"\"});\n    const classes = useStyles();\n// get urls\n    useEffect(() => {\n        console.log(\"getting url data...\", zipCode)\n        axios.get(\"/test\", {params: { zipCode: zipCode} })\n        .then((response) => {\n            console.log(response.data)\n            setUrlData(response.data)\n        })\n        .catch((error) => {\n            console.log(error);\n        })\n\n\n    }, [zipCode])\n    // clean them \n    const cleanUrl = async (url) => {\n        const response = await  axios.get(\"/cleanUrl\", {params: { url: url } });\n        const data = await response.data;\n        return data;\n\n    }\n    const onChange = (e) => {\n        const { name, value } = e.target;\n        setZipCodeSave(false);\n        if(name === \"zipcode\"){\n            if(value.length  === 5){\n                const regEx = /^[0-9]{5}$/;\n                if(value.match(regEx)){\n                    console.log(value);\n                    setZipCode(value);\n                    setErrors(prevErrors => ({ ...prevErrors, zipCode: \"\" }));\n                }\n                else{\n                    setErrors(prevErrors => ({ ...prevErrors, zipCode: \"Zipcode must be 5 digits\" }));\n                }\n            }\n        }\n    }\n    // store all clean urls using cleanUrl\n    useEffect(() => {\n        let urls = []\n        console.log(\"cleaning urls\");\n        for(const url of urlData){\n            let data = cleanUrl(url);\n            if(data != null){\n                urls.push(data);\n            }\n        }\n        Promise.all(urls).then((response) => {\n            setCleanUrls(response);\n            console.log(response, cleanUrls);\n            let bars = JSON.parse(window.localStorage.getItem('bars'));\n            //console.log(JSON.parse(window.localStorage.getItem('bars')), response);\n            // if( bars === null || bars === undefined || bars.length == 0) {\n            //    // console.log(response);\n            //     window.localStorage.setItem('bars', JSON.stringify(response));\n            //     //console.log(window.localStorage.getItem('bars') );\n            // }\n            // if(response.length > 0 && response !== bars) {\n            //     console.log(response);\n            //     window.localStorage.removeItem('bars');\n            //     window.localStorage.setItem('bars', JSON.stringify(response));\n            // }\n            \n\n        }).catch(err => {\n            console.log(err);\n        })\n\n\n    }, [urlData])\n\n\n    return (\n        <div>\n            <Navigation />\n            <EventsHeader />\n            <SideMenu />\n            <div className=\"wineBarsContainer\">\n                        <br />\n                        <form className={classes.root} noValidate autoComplete=\"off\" id=\"zipCodeForm\" onSubmit={e => {e.preventDefault();}}>\n                            <label htmlFor=\"zipcode\">Zipcode</label>\n                                <TextField id=\"outlined-basic\" label={zipCode} variant=\"outlined\" name=\"zipcode\" id=\"zipcode\" placeholder={zipCode}  inputProps={{ maxLength:5 }} onChange={onChange}  />\n                                {(errors.zipcode.length > 0) &&\n                                <p className=\"error\">{errors.zipCode}</p>\n                                }\n                                {/* <div className=\"buttons\">\n                                    <button className=\"button is-info is-light is-medium is-fullwidth\" onClick={updateZipcode}>Update</button>\n                                </div> */}\n                                {zipCodeSave &&\n                                    <span style={{color: \"green\"}}>Zip Code successfully saved.</span>\n                                }\n            \n                        </form>         \n                    </div>\n            <div>\n                { \n   \n                cleanUrls.length === 0 ? \n                <p>Loading...</p> :\n                \n                cleanUrls.map((url, i) => {\n                    return (\n                        <p key={i}>{url}</p>\n                    )\n                }) \n\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default Events;"]},"metadata":{},"sourceType":"module"}