{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/kylelong/corkedup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"/Users/kylelong/corkedup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useEffect,useState,useContext}from'react';import Logo from'./Logo';import'../styles/Signup.css';import{makeStyles}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import Checkbox from'@material-ui/core/Checkbox';import{Link,useHistory}from\"react-router-dom\";import gql from'graphql-tag';import{useMutation}from\"@apollo/client\";import{useForm}from'../util/hooks';import{AuthContext}from'../context/auth';//TODO: check if already logged in before visiting this page\n//make sure user exists in db before redirectin to home\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& > *':{margin:theme.spacing(1),width:'25ch'}}};});var label={inputProps:{'aria-label':'Show'}};function SignUp(props){var context=useContext(AuthContext);var classes=useStyles();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var history=useHistory();var _useForm=useForm(registerUser,{firstName:'',lastName:'',zipCode:'',email:'',password:''}),onChange=_useForm.onChange,onSubmit=_useForm.onSubmit,values=_useForm.values;var _useMutation=useMutation(REGISTER_USER,{update:function update(_,_ref){var userData=_ref.data.register;context.login(userData);history.push('/payment');},onError:function onError(_ref2){var graphQLErrors=_ref2.graphQLErrors;if(graphQLErrors){setErrors(graphQLErrors[0].extensions.errors);}},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),addUser=_useMutation2[0],loading=_useMutation2[1].loading;function registerUser(){addUser();}var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showPassword=_useState4[0],setShowPassword=_useState4[1];var clickedShowPassword=function clickedShowPassword(){setShowPassword(function(showPassword){return!showPassword;});};return/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Logo,{}),/*#__PURE__*/_jsx(\"h3\",{className:\"welcome\",children:\"Welcome to Corked Up. Create your account.\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:classes.root,noValidate:true,autoComplete:\"off\",id:\"signupForm\",children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"First Name\",variant:\"outlined\",name:\"firstName\",onChange:onChange}),errors.hasOwnProperty(\"firstName\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.firstName}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Last Name\",variant:\"outlined\",name:\"lastName\",onChange:onChange}),errors.hasOwnProperty(\"lastName\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.lastName}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Zip code\",variant:\"outlined\",name:\"zipCode\",onChange:onChange}),errors.hasOwnProperty(\"zipCode\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.zipCode}),/*#__PURE__*/_jsx(\"p\",{className:\"explain\",children:\"for accurate wine reccommendations\"}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Email\",variant:\"outlined\",name:\"email\",onChange:onChange}),errors.hasOwnProperty(\"email\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.email}),/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"Password\",variant:\"outlined\",name:\"password\",type:showPassword?\"text\":\"password\",onChange:onChange}),errors.hasOwnProperty(\"password\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.password}),/*#__PURE__*/_jsxs(\"span\",{children:[/*#__PURE__*/_jsx(Checkbox,{onClick:clickedShowPassword}),\" Show password\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-light is-medium is-fullwidth\",type:\"submit\",children:\"Sign up\"})}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Already an account? Sign in\"})]})]})});}var REGISTER_USER=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n mutation register(\\n     $firstName: String!\\n     $lastName: String!\\n     $zipCode: String!\\n     $email: String!\\n     $password: String!\\n ) {\\n     register(\\n         registerInput: {\\n             firstName: $firstName\\n             lastName: $lastName\\n             zipCode: $zipCode\\n             email: $email\\n             password: $password\\n         }\\n     ){\\n         id email token firstName lastName zipCode createdAt\\n     }\\n }\\n\"])));export default SignUp;","map":{"version":3,"sources":["/Users/kylelong/corkedup/client/src/components/SignUp.js"],"names":["React","useEffect","useState","useContext","Logo","makeStyles","TextField","Checkbox","Link","useHistory","gql","useMutation","useForm","AuthContext","useStyles","theme","root","margin","spacing","width","label","inputProps","SignUp","props","context","classes","errors","setErrors","history","registerUser","firstName","lastName","zipCode","email","password","onChange","onSubmit","values","REGISTER_USER","update","_","userData","data","register","login","push","onError","graphQLErrors","extensions","variables","addUser","loading","showPassword","setShowPassword","clickedShowPassword","hasOwnProperty"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport Logo from './Logo';\nimport '../styles/Signup.css';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport { Link, useHistory } from \"react-router-dom\";\nimport gql from 'graphql-tag';\nimport { useMutation } from \"@apollo/client\";\nimport { useForm } from '../util/hooks'\nimport { AuthContext } from '../context/auth';\n//TODO: check if already logged in before visiting this page\n//make sure user exists in db before redirectin to home\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      width: '25ch',\n    },\n  },\n}));\nconst label = { inputProps: { 'aria-label': 'Show' } }\n\nfunction SignUp(props) {\n    const context = useContext(AuthContext);\n    const classes = useStyles();\n    const [errors, setErrors] = useState({});\n    const history = useHistory();\n\n    const {onChange, onSubmit, values } = useForm(registerUser, {\n        firstName: '',\n        lastName: '',\n        zipCode: '',\n        email: '',\n        password: '',\n    })\n\n    const [addUser, { loading }] = useMutation(REGISTER_USER, {\n        update(_, { data: { register : userData} }){\n            context.login(userData);\n            history.push('/payment');\n        },\n        onError({ graphQLErrors }){\n            if(graphQLErrors){\n                setErrors(graphQLErrors[0].extensions.errors);\n            }\n        },\n        variables: values\n    });\n\n    function registerUser(){\n        addUser();\n    }\n\n    const [showPassword, setShowPassword] = useState(false);\n\n    const clickedShowPassword = () => {\n        setShowPassword(showPassword => !showPassword);\n    }\n\n    return (\n        <div className=\"main\">\n            <div className=\"container\">\n                <Logo />\n                <h3 className='welcome'>Welcome to Corked Up. Create your account.</h3>\n                \n                <form onSubmit={onSubmit} className={classes.root} noValidate autoComplete=\"off\" id=\"signupForm\">\n                <TextField id=\"outlined-basic\" label=\"First Name\" variant=\"outlined\" name=\"firstName\" onChange={onChange} />\n                {  errors.hasOwnProperty(\"firstName\") &&\n                       <p className=\"error\">{errors.firstName}</p>\n                }\n                <TextField id=\"outlined-basic\" label=\"Last Name\" variant=\"outlined\" name=\"lastName\" onChange={onChange} />\n                {   errors.hasOwnProperty(\"lastName\") &&\n                       <p className=\"error\">{errors.lastName}</p>\n                }\n                 <TextField id=\"outlined-basic\" label=\"Zip code\" variant=\"outlined\" name=\"zipCode\" onChange={onChange} />\n                {   errors.hasOwnProperty(\"zipCode\") &&\n                       <p className=\"error\">{errors.zipCode}</p>\n                }\n                <p className=\"explain\">for accurate wine reccommendations</p>\n                <TextField id=\"outlined-basic\" label=\"Email\" variant=\"outlined\" name=\"email\" onChange={onChange} />\n                {   errors.hasOwnProperty(\"email\") &&\n                       <p className=\"error\">{errors.email}</p>\n                }\n                <TextField id=\"outlined-basic\" label=\"Password\" variant=\"outlined\" name=\"password\" type={showPassword ? \"text\" : \"password\"} onChange={onChange} />\n\n                {   errors.hasOwnProperty(\"password\") &&\n                       <p className=\"error\">{errors.password}</p>\n                }\n                    <span>\n                        <Checkbox onClick={clickedShowPassword}/> Show password\n                    </span>\n\n                    <div className=\"buttons\">\n                        <button className=\"button is-info is-light is-medium is-fullwidth\" type=\"submit\">Sign up</button> \n                    </div>\n                       \n                    <Link to=\"/\">Already an account? Sign in</Link>\n                </form>\n\n            </div>\n        </div>\n\n    );\n}\n\nconst REGISTER_USER = gql`\n mutation register(\n     $firstName: String!\n     $lastName: String!\n     $zipCode: String!\n     $email: String!\n     $password: String!\n ) {\n     register(\n         registerInput: {\n             firstName: $firstName\n             lastName: $lastName\n             zipCode: $zipCode\n             email: $email\n             password: $password\n         }\n     ){\n         id email token firstName lastName zipCode createdAt\n     }\n }\n`;\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}