{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/kylelong/corkedup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _defineProperty from\"/Users/kylelong/corkedup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _slicedToArray from\"/Users/kylelong/corkedup/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject;import React,{useState,useContext}from'react';import'../styles/Account.css';import{makeStyles}from'@material-ui/core/styles';import TextField from'@material-ui/core/TextField';import Navigation from'./Navigation';import SideMenu from'./SideMenu';import{useHistory}from\"react-router-dom\";import gql from'graphql-tag';import{useMutation}from\"@apollo/client\";import{useForm}from'../util/hooks';import{AuthContext}from'../context/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:{'& > *':{margin:theme.spacing(1),width:'25ch'}}};});var Account=function Account(){var _jsx2;var _useContext=useContext(AuthContext),user=_useContext.user;var classes=useStyles();var email=user.email;var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),errors=_useState2[0],setErrors=_useState2[1];var context=useContext(AuthContext);var joinDate=new Date(user.createdAt).toDateString();var _useForm=useForm(updateZip,{email:email,zipCode:''}),onChange=_useForm.onChange,onSubmit=_useForm.onSubmit,values=_useForm.values;var _useMutation=useMutation(UPDATE_ZIPCODE,{update:function update(_,_ref){var userData=_ref.data.updateZipcode;context.login(userData);},onError:function onError(_ref2){var graphQLErrors=_ref2.graphQLErrors;if(graphQLErrors){setErrors(graphQLErrors[0].extensions.errors);}},variables:values}),_useMutation2=_slicedToArray(_useMutation,2),changeZipCode=_useMutation2[0],loading=_useMutation2[1].loading;function updateZip(){changeZipCode();}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"accountContainer\",children:[/*#__PURE__*/_jsx(Navigation,{}),/*#__PURE__*/_jsx(SideMenu,{}),/*#__PURE__*/_jsx(\"h3\",{className:\"header\",children:\"Account Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Member since: \",joinDate]}),/*#__PURE__*/_jsxs(\"form\",{className:classes.root,onSubmit:onSubmit,noValidate:true,autoComplete:\"off\",id:\"loginForm\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"zipcode\",children:\"Zipcode\"}),/*#__PURE__*/_jsx(TextField,(_jsx2={id:\"outlined-basic\",label:user.zipCode,variant:\"outlined\",name:\"zipCode\"},_defineProperty(_jsx2,\"id\",\"zipCode\"),_defineProperty(_jsx2,\"placeholder\",user.zipCode),_defineProperty(_jsx2,\"inputProps\",{maxLength:5}),_defineProperty(_jsx2,\"onChange\",onChange),_jsx2)),errors.hasOwnProperty(\"zipCode\")&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:errors.zipCode}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button is-info is-light is-medium is-fullwidth\",type:\"submit\",children:\"Update\"})})]})]})});};var UPDATE_ZIPCODE=gql(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n\\nmutation updateZipcode(\\n $email: String!\\n $zipCode: String!\\n) {\\n    updateZipcode(\\n            zipCodeInput: {\\n                email: $email,\\n                zipCode: $zipCode\\n            }\\n        ){\\n            id email token firstName lastName zipCode createdAt\\n        }\\n}\\n\"])));export default Account;","map":{"version":3,"sources":["/Users/kylelong/corkedup/client/src/components/Account.js"],"names":["React","useState","useContext","makeStyles","TextField","Navigation","SideMenu","useHistory","gql","useMutation","useForm","AuthContext","useStyles","theme","root","margin","spacing","width","Account","user","classes","email","history","errors","setErrors","context","joinDate","Date","createdAt","toDateString","updateZip","zipCode","onChange","onSubmit","values","UPDATE_ZIPCODE","update","_","userData","data","updateZipcode","login","onError","graphQLErrors","extensions","variables","changeZipCode","loading","maxLength","hasOwnProperty"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport '../styles/Account.css';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Navigation from './Navigation';\nimport SideMenu from './SideMenu';\nimport { useHistory } from \"react-router-dom\";\n\nimport gql from 'graphql-tag';\nimport { useMutation } from \"@apollo/client\";\nimport { useForm } from '../util/hooks'\nimport { AuthContext } from '../context/auth';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      '& > *': {\n        margin: theme.spacing(1),\n        width: '25ch',\n      },\n    },\n  }));\nconst Account = () => {\n    const { user } = useContext(AuthContext);\n    const classes = useStyles();\n    const email = user.email;\n    const history = useHistory();\n    const [errors, setErrors] = useState({});\n    const context = useContext(AuthContext);\n    const joinDate = new Date(user.createdAt).toDateString();\n\n    const {onChange, onSubmit, values } = useForm(updateZip, {\n        email: email,\n        zipCode:''\n    })\n\n    const [changeZipCode, { loading }] = useMutation(UPDATE_ZIPCODE, {\n        update(_, { data: { updateZipcode: userData } }){\n            context.login(userData);\n        }, \n        onError({ graphQLErrors }){\n            if(graphQLErrors){\n                setErrors(graphQLErrors[0].extensions.errors);\n            }\n        },\n        variables: values\n    });\n\n    function updateZip(){\n        changeZipCode();\n    }\n\n\n    return (\n        <div>\n             <div className=\"accountContainer\">\n             <Navigation />\n                    <SideMenu />\n                 <h3 className=\"header\">Account Information</h3>\n                 <p>Email: {email}</p>\n                 <p>Member since: {joinDate}</p>\n                 <form className={classes.root} onSubmit={onSubmit} noValidate autoComplete=\"off\" id=\"loginForm\">\n                 <label htmlFor=\"zipcode\">Zipcode</label>\n                    <TextField id=\"outlined-basic\" label={user.zipCode} variant=\"outlined\" name=\"zipCode\" id=\"zipCode\" placeholder={user.zipCode}  inputProps={{ maxLength:5 }} onChange={onChange} />\n                    {(errors.hasOwnProperty(\"zipCode\")) &&\n                       <p className=\"error\">{errors.zipCode}</p>\n                    }\n                    <div className=\"buttons\">\n                        <button className=\"button is-info is-light is-medium is-fullwidth\" type=\"submit\">Update</button>\n                    </div>\n            \n                </form>\n               \n             </div>\n        </div>\n    );\n};\n\nconst UPDATE_ZIPCODE = gql`\n\nmutation updateZipcode(\n $email: String!\n $zipCode: String!\n) {\n    updateZipcode(\n            zipCodeInput: {\n                email: $email,\n                zipCode: $zipCode\n            }\n        ){\n            id email token firstName lastName zipCode createdAt\n        }\n}\n`;\n\nexport default Account;"]},"metadata":{},"sourceType":"module"}